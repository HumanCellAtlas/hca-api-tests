FROM python:3.7-slim

WORKDIR scale_test
COPY locust/common ./common
COPY locust/locusts/files ./locusts/files
COPY locust/locusts/secondary_analysis.py ./locusts

RUN pip install locust

ENV AUTH0_DOMAIN=sample.auth0.com
ENV CLIENT_ID=0
ENV CLIENT_SECRET=0

ENV FILE_UPLOAD_URL=http://localhost:8888/v1
ENV HOST_URL=http://localhost:8080

EXPOSE 8089
CMD locust --host=${HOST_URL} -f locusts/secondary_analysis.py